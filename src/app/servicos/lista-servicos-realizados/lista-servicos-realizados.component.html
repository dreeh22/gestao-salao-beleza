<h4 class="titulo">Consultar Serviços Realizados</h4>

<app-mensagem-sucesso></app-mensagem-sucesso>
<app-mensagem-erro></app-mensagem-erro>

<section class="col-12">

    <div class="card" style="margin-left: 1%; margin-right: 1%;">

        <div class="card-header">
            Serviços Realizados
        </div>

        <div class="card-body">

            <h6 style="margin-bottom: 2%;">Consultar serviços por período</h6>

            <form #form="ngForm" (ngSubmit)="consultarServicosPorData(form); form.reset()">

                <div class="row mb-4">

                    <div class="form-group col">
                        <label for="dataInicio">Data de Inicio</label>
                        <input type="date" id="dataInicio" name="dataInicio" [(ngModel)]="consultarPorData.dataInicio" class="form-control">
                    </div>

                    <div class="form-group col">
                        <label for="dataFim">Data Fim</label>
                        <input type="date" id="dataFim" name="dataFim" [(ngModel)]="consultarPorData.dataFim" class="form-control">
                    </div>

                </div>

                <button type="submit" class="btn btn-primary">Consultar</button>

              </form>

        </div>
    </div>

</section>

<section class="col-12 mt-3">

    <div class="card" style="margin-left: 1%; margin-right: 1%;">

        <div class="card-header">
            Resultado
        </div>

        <div class="card-body">

            <table class="table table-hover text-center">

                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Cliente</th>
                        <th>Serviço realizado</th>
                        <th>Valor do serviço</th>
                        <th>Data de realização</th>
                        <th>Ações</th>
                    </tr>
                </thead>

                <tbody>
                    <tr *ngFor="let servicoRealizado of servicoRealizados">
                        <td>{{servicoRealizado.id}}</td>
                        <td>{{servicoRealizado.nomeCliente}}</td>
                        <td>{{servicoRealizado.nomeServico}}</td>
                        <td>{{servicoRealizado.valorServico}}</td>
                        <td>{{servicoRealizado.dataServico}}</td>
                        <td>
                            <button type="button" class="btn btn-primary mr-2" (click)="capiturarIdServico(servicoRealizado.id)">Editar</button>
                            <button type="button" class="btn btn-danger" (click)="abrirModalDelete(servicoRealizado.id)">excluir</button>
                        </td>
                    </tr>
                </tbody>

            </table>

        </div>

    </div>

</section>

<ng-template #modalDelete>

    <div class="modal-header background-modal-deletar">
      <h4 class="modal-title">Confirmação</h4>
    </div>
  
    <div class="modal-body text-center">
      <h4>Deseja realmente deletar esse serviço?</h4>
      <button type="button" class="btn btn-default" style="margin-top: 5%;" (click)="confirm()">Sim</button>
      <button type="button" class="btn btn-primary" style="margin-top: 5%;" (click)="decline()">Não</button>
    </div>
  </ng-template>